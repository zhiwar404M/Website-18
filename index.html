<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙÙŠØ¯ÙŠÙˆ Ø¨Ø±Ùˆ - Ù…Ù†ØµØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
    
    <!-- ÙÛ†Ù†ØªÛ• Ø¨Ø§Ø´Û•Ú©Ø§Ù†ÛŒ Ø¹Û•Ø±Û•Ø¨ÛŒ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic:wght@400;500;600;700&family=Almarai:wght@300;400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <!-- Header -->
    <header>
        <nav>
            <div class="logo">
                <span class="logo-icon">â–¶ï¸</span>
                <span>ÙÙŠØ¯ÙŠÙˆ Ø¨Ø±Ùˆ</span>
            </div>

            <div class="search-wrapper">
                <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙÙŠØ¯ÙŠÙˆ...">
                <span class="search-icon">ğŸ”</span>
            </div>

            <div class="nav-actions">
                <div class="hidden" id="authButtons">
                    <button class="btn btn-outline" onclick="openAuthModal('login')">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                    <button class="btn btn-primary" onclick="openAuthModal('register')">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
                </div>
                
                <div class="user-wrapper hidden" id="userWrapper">
                    <img src="https://via.placeholder.com/100" alt="User" class="user-avatar" id="userAvatar">
                    <div class="dropdown-menu">
                        <a href="#" class="dropdown-item" onclick="showProfile()">
                            <span>ğŸ‘¤</span>
                            <span>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</span>
                        </a>
                        <a href="#" class="dropdown-item" onclick="showVideos()">
                            <span>ğŸ“¹</span>
                            <span>Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</span>
                        </a>
                        <div style="height: 1px; background: var(--border); margin: 8px 0;"></div>
                        <a href="#" class="dropdown-item" onclick="logout()">
                            <span>ğŸšª</span>
                            <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <div class="container" id="mainContent">
        <div class="page-header">
            <h1 class="page-title">Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</h1>
            <p class="page-subtitle">Ø§Ø³ØªÙƒØ´Ù Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…ØªÙ†ÙˆØ¹Ø© Ù…Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©</p>
        </div>
        <div class="videos-grid" id="videosGrid"></div>
        <div class="no-results hidden" id="noResults">
            Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¨Ø­Ø« ğŸ”
        </div>
    </div>

    <!-- Profile Page -->
    <div class="profile-container hidden" id="profilePage">
        <div class="profile-banner">
            <img src="https://via.placeholder.com/120" alt="Profile" class="profile-avatar-large" id="profileAvatarLarge">
            <h1 class="profile-name" id="profileName">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h1>
            <p class="profile-email" id="profileEmail">user@example.com</p>
        </div>

        <div class="profile-stats">
            <div class="stat-card">
                <div class="stat-value" id="totalWatched">0</div>
                <div class="stat-label">ÙÙŠØ¯ÙŠÙˆ Ø´Ø§Ù‡Ø¯ØªÙ‡</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalComments">0</div>
                <div class="stat-label">Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="joinedDays">0</div>
                <div class="stat-label">ÙŠÙˆÙ… ÙÙŠ Ø§Ù„Ù…Ù†ØµØ©</div>
            </div>
        </div>

        <button class="btn btn-primary" onclick="showVideos()" style="margin: 0 auto; display: block;">
            Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
        </button>
    </div>

    <!-- Video Modal -->
    <div class="video-modal" id="videoModal">
        <span class="close-modal" onclick="closeVideoModal()">&times;</span>
        <div class="modal-content">
            <div class="video-player" id="videoPlayer"></div>
            <div class="video-details" id="videoDetailsContent"></div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-box">
            <span class="close-modal" onclick="closeAuthModal()" style="position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; font-size: 24px;">&times;</span>
            
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                <button class="auth-tab" data-tab="register">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
            </div>

            <!-- Login Form -->
            <form class="auth-form active" id="loginForm">
                <button type="button" class="google-btn" onclick="loginWithGoogle()">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path fill="#4285F4" d="M19.6 10.23c0-.82-.1-1.42-.25-2.05H10v3.72h5.5c-.15.96-.74 2.31-2.04 3.22v2.45h3.16c1.89-1.73 2.98-4.3 2.98-7.34z"/>
                        <path fill="#34A853" d="M13.46 15.13c-.83.59-1.96 1-3.46 1-2.64 0-4.88-1.74-5.68-4.15H1.07v2.52C2.72 17.75 6.09 20 10 20c2.7 0 4.96-.89 6.62-2.42l-3.16-2.45z"/>
                        <path fill="#FBBC05" d="M3.99 10c0-.69.12-1.35.32-1.97V5.51H1.07A9.973 9.973 0 000 10c0 1.61.39 3.14 1.07 4.49l3.24-2.52c-.2-.62-.32-1.28-.32-1.97z"/>
                        <path fill="#EA4335" d="M10 3.88c1.88 0 3.13.81 3.85 1.48l2.84-2.76C14.96.99 12.7 0 10 0 6.09 0 2.72 2.25 1.07 5.51l3.24 2.52C5.12 5.62 7.36 3.88 10 3.88z"/>
                    </svg>
                    ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© Google
                </button>

                <div class="divider">Ø£Ùˆ</div>

                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                    <input type="email" class="form-input" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <input type="password" class="form-input" id="loginPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            </form>

            <!-- Register Form -->
            <form class="auth-form" id="registerForm">
                <button type="button" class="google-btn" onclick="loginWithGoogle()">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path fill="#4285F4" d="M19.6 10.23c0-.82-.1-1.42-.25-2.05H10v3.72h5.5c-.15.96-.74 2.31-2.04 3.22v2.45h3.16c1.89-1.73 2.98-4.3 2.98-7.34z"/>
                        <path fill="#34A853" d="M13.46 15.13c-.83.59-1.96 1-3.46 1-2.64 0-4.88-1.74-5.68-4.15H1.07v2.52C2.72 17.75 6.09 20 10 20c2.7 0 4.96-.89 6.62-2.42l-3.16-2.45z"/>
                        <path fill="#FBBC05" d="M3.99 10c0-.69.12-1.35.32-1.97V5.51H1.07A9.973 9.973 0 000 10c0 1.61.39 3.14 1.07 4.49l3.24-2.52c-.2-.62-.32-1.28-.32-1.97z"/>
                        <path fill="#EA4335" d="M10 3.88c1.88 0 3.13.81 3.85 1.48l2.84-2.76C14.96.99 12.7 0 10 0 6.09 0 2.72 2.25 1.07 5.51l3.24 2.52C5.12 5.62 7.36 3.88 10 3.88z"/>
                    </svg>
                    Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© Google
                </button>

                <div class="divider">Ø£Ùˆ</div>

                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ø§Ø³Ù…</label>
                    <input type="text" class="form-input" id="registerName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                    <input type="email" class="form-input" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <input type="password" class="form-input" id="registerPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
            </form>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut, updateProfile } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, collection, addDoc, query, where, getDocs, orderBy, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const provider = new GoogleAuthProvider();

        window.auth = auth;
        window.db = db;
        window.provider = provider;
        window.currentUser = null;

        onAuthStateChanged(auth, (user) => {
            if (user) {
                window.currentUser = user;
                document.getElementById('authButtons').classList.add('hidden');
                document.getElementById('userWrapper').classList.remove('hidden');
                document.getElementById('userAvatar').src = user.photoURL || 'https://via.placeholder.com/100';
                
                if (document.getElementById('profileAvatarLarge')) {
                    document.getElementById('profileAvatarLarge').src = user.photoURL || 'https://via.placeholder.com/120';
                    document.getElementById('profileName').textContent = user.displayName || 'Ù…Ø³ØªØ®Ø¯Ù…';
                    document.getElementById('profileEmail').textContent = user.email;
                }
            } else {
                window.currentUser = null;
                document.getElementById('authButtons').classList.remove('hidden');
                document.getElementById('userWrapper').classList.add('hidden');
            }
        });

        window.loginWithGoogle = async function() {
            try {
                await signInWithPopup(auth, provider);
                closeAuthModal();
                alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰');
            } catch (error) {
                alert('Ø®Ø·Ø£: ' + error.message);
            }
        };

        window.registerWithEmail = async function(e) {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                await updateProfile(userCredential.user, { displayName: name });
                closeAuthModal();
                alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰');
            } catch (error) {
                alert('Ø®Ø·Ø£: ' + error.message);
            }
        };

        window.loginWithEmail = async function(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                await signInWithEmailAndPassword(auth, email, password);
                closeAuthModal();
                alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰');
            } catch (error) {
                alert('Ø®Ø·Ø£: ' + error.message);
            }
        };

        window.logout = async function() {
            try {
                await signOut(auth);
                alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‘‹');
                showVideos();
            } catch (error) {
                alert('Ø®Ø·Ø£: ' + error.message);
            }
        };

        window.addComment = async function(videoId) {
            if (!window.currentUser) {
                alert('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }

            const commentText = document.getElementById('commentText').value;
            if (!commentText.trim()) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© ØªØ¹Ù„ÙŠÙ‚');
                return;
            }

            try {
                await addDoc(collection(db, 'comments'), {
                    videoId: videoId,
                    userId: window.currentUser.uid,
                    userName: window.currentUser.displayName || 'Ù…Ø³ØªØ®Ø¯Ù…',
                    userAvatar: window.currentUser.photoURL || 'https://via.placeholder.com/40',
                    text: commentText,
                    timestamp: serverTimestamp()
                });

                document.getElementById('commentText').value = '';
                loadComments(videoId);
                alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­! ğŸ’¬');
            } catch (error) {
                alert('Ø®Ø·Ø£: ' + error.message);
            }
        };

        window.loadComments = async function(videoId) {
            try {
                const q = query(
                    collection(db, 'comments'),
                    where('videoId', '==', videoId),
                    orderBy('timestamp', 'desc')
                );
                const querySnapshot = await getDocs(q);
                
                const commentsList = document.getElementById('commentsList');
                const commentsCount = document.getElementById('commentsCount');
                
                commentsCount.textContent = querySnapshot.size;
                
                if (querySnapshot.empty) {
                    commentsList.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 30px;">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø¨Ø¹Ø¯. ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠØ¹Ù„Ù‚! ğŸ¯</p>';
                    return;
                }

                commentsList.innerHTML = '';
                querySnapshot.forEach((doc) => {
                    const comment = doc.data();
                    const date = comment.timestamp ? comment.timestamp.toDate() : new Date();
                    const commentHTML = `
                        <div class="comment">
                            <div class="comment-header">
                                <img src="${comment.userAvatar}" alt="${comment.userName}" class="comment-avatar">
                                <span class="comment-author">${comment.userName}</span>
                                <span class="comment-date">${formatDate(date)}</span>
                            </div>
                            <p class="comment-text">${comment.text}</p>
                        </div>
                    `;
                    commentsList.innerHTML += commentHTML;
                });
            } catch (error) {
                console.error('Error loading comments:', error);
            }
        };

        function formatDate(date) {
            const now = new Date();
            const diff = Math.floor((now - date) / 1000);

            if (diff < 60) return 'Ø§Ù„Ø¢Ù†';
            if (diff < 3600) return Math.floor(diff / 60) + ' Ø¯Ù‚ÙŠÙ‚Ø©';
            if (diff < 86400) return Math.floor(diff / 3600) + ' Ø³Ø§Ø¹Ø©';
            if (diff < 2592000) return Math.floor(diff / 86400) + ' ÙŠÙˆÙ…';
            return date.toLocaleDateString('ar-SA');
        }

        document.getElementById('loginForm').addEventListener('submit', loginWithEmail);
        document.getElementById('registerForm').addEventListener('submit', registerWithEmail);
    </script>

    <script>
        // Videos Database
        const videos = [
            {
                id: 1,
                title: "ØªØ¹Ù„Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø¨Ù„ØºØ© Python Ù…Ù† Ø§Ù„ØµÙØ±",
                thumbnail: "https://via.placeholder.com/400x300/F59E0B/1E293B?text=Python+Course",
                duration: "15:30",
                views: "1.2K",
                uploadDate: "2024-02-01",
                description: "Ø¯ÙˆØ±Ø© Ø´Ø§Ù…Ù„Ø© Ù„ØªØ¹Ù„Ù… Ù„ØºØ© Python Ù…Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø­ØªÙ‰ Ø§Ù„Ø§Ø­ØªØ±Ø§Ù. ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø³Ù†ØªØ¹Ù„Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª ÙˆØ§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ù…Ù‡Ù…Ø© ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©.",
                streamtapeUrl: " https://streamtape.com/e/elB498DqQkCYR9A/"
            },
            {
                id: 2,
                title: "ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… HTML Ùˆ CSS",
                thumbnail: "https://via.placeholder.com/400x300/10B981/1E293B?text=Web+Design",
                duration: "22:45",
                views: "2.5K",
                uploadDate: "2024-02-03",
                description: "ØªØ¹Ù„Ù… ÙƒÙŠÙÙŠØ© ØªØµÙ…ÙŠÙ… Ù…ÙˆÙ‚Ø¹ ÙˆÙŠØ¨ Ø§Ø­ØªØ±Ø§ÙÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… HTML Ùˆ CSS. Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ† ÙˆØ§Ù„Ù…Ø­ØªØ±ÙÙŠÙ†.",
                streamtapeUrl: "https://streamtape.com/e/VIDEO_ID_HERE"
            },
            {
                id: 3,
                title: "React.js Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ† - Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„",
                thumbnail: "https://via.placeholder.com/400x300/6366F1/1E293B?text=React+JS",
                duration: "18:20",
                views: "3.1K",
                uploadDate: "2024-02-05",
                description: "Ø¯ÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø© Ù„ØªØ¹Ù„Ù… React.js Ù…Ù† Ø§Ù„ØµÙØ±. ØªØ¹Ù„Ù… ÙƒÙŠÙÙŠØ© Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙˆÙŠØ¨ ØªÙØ§Ø¹Ù„ÙŠØ©.",
                streamtapeUrl: "https://streamtape.com/e/VIDEO_ID_HERE"
            },
            {
                id: 4,
                title: "JavaScript Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù„Ù„Ø§Ø­ØªØ±Ø§Ù",
                thumbnail: "https://via.placeholder.com/400x300/F59E0B/1E293B?text=JavaScript",
                duration: "25:10",
                views: "4.3K",
                uploadDate: "2024-01-28",
                description: "ÙƒÙ„ Ù…Ø§ ØªØ­ØªØ§Ø¬ Ù…Ø¹Ø±ÙØªÙ‡ Ø¹Ù† JavaScript. Ù…Ù†Ø§Ø³Ø¨ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª.",
                streamtapeUrl: "https://streamtape.com/e/VIDEO_ID_HERE"
            },
            {
                id: 5,
                title: "Node.js Ùˆ Express - Ø¨Ù†Ø§Ø¡ Backend",
                thumbnail: "https://via.placeholder.com/400x300/8B5CF6/1E293B?text=Node.js",
                duration: "30:15",
                views: "1.8K",
                uploadDate: "2024-02-04",
                description: "ØªØ¹Ù„Ù… Ø¨Ù†Ø§Ø¡ Backend Ù‚ÙˆÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Node.js Ùˆ Express. Ù…Ù† Ø¥Ù†Ø´Ø§Ø¡ API Ø¥Ù„Ù‰ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.",
                streamtapeUrl: "https://streamtape.com/e/VIDEO_ID_HERE"
            },
            {
                id: 6,
                title: "MongoDB - Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚",
                thumbnail: "https://via.placeholder.com/400x300/10B981/1E293B?text=MongoDB",
                duration: "20:40",
                views: "2.2K",
                uploadDate: "2024-01-30",
                description: "ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ù…Ù„ Ù…Ø¹ MongoDBØŒ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª NoSQL. Ù…Ù† Ø§Ù„ØªØ«Ø¨ÙŠØª Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©.",
                streamtapeUrl: "https://streamtape.com/e/VIDEO_ID_HERE"
            }
        ];

        let searchTerm = '';

        function displayVideos() {
            const grid = document.getElementById('videosGrid');
            const noResults = document.getElementById('noResults');
            
            let filteredVideos = videos;

            if (searchTerm) {
                filteredVideos = filteredVideos.filter(v => 
                    v.title.includes(searchTerm) || 
                    v.description.includes(searchTerm)
                );
            }

            if (filteredVideos.length === 0) {
                grid.classList.add('hidden');
                noResults.classList.remove('hidden');
                return;
            }

            grid.classList.remove('hidden');
            noResults.classList.add('hidden');

            grid.innerHTML = filteredVideos.map(video => `
                <div class="video-card" onclick="openVideo(${video.id})">
                    <div class="video-thumbnail-wrapper">
                        <img class="video-thumbnail" src="${video.thumbnail}" alt="${video.title}">
                        <div class="play-overlay">â–¶</div>
                        <div class="duration-badge">${video.duration}</div>
                    </div>
                    <div class="video-info">
                        <h3 class="video-title">${video.title}</h3>
                        <div class="video-meta">
                            <div class="meta-item">
                                <span>ğŸ‘ï¸</span>
                                <span>${video.views}</span>
                            </div>
                            <div class="meta-item">
                                <span>ğŸ“…</span>
                                <span>${formatUploadDate(video.uploadDate)}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function openVideo(id) {
            const video = videos.find(v => v.id === id);
            if (!video) return;

            const modal = document.getElementById('videoModal');
            const player = document.getElementById('videoPlayer');
            const details = document.getElementById('videoDetailsContent');

            player.innerHTML = `
                <iframe 
                    src="${video.streamtapeUrl}" 
                    allowfullscreen 
                    allow="autoplay; fullscreen"
                    frameborder="0"
                    scrolling="no">
                </iframe>
            `;

            const commentSection = window.currentUser ? `
                <div class="comment-form">
                    <textarea 
                        class="comment-textarea" 
                        id="commentText" 
                        placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§..."
                    ></textarea>
                    <button class="comment-submit" onclick="addComment(${video.id})">
                        Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚
                    </button>
                </div>
            ` : `
                <div class="login-required">
                    <p>ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚</p>
                    <button class="btn btn-primary" onclick="openAuthModal('login')">
                        ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    </button>
                </div>
            `;

            details.innerHTML = `
                <div class="detail-header">
                    <h2 class="detail-title">${video.title}</h2>
                    <div class="detail-stats">
                        <div class="stat-item">
                            <span class="stat-icon">ğŸ‘ï¸</span>
                            <span>${video.views} Ù…Ø´Ø§Ù‡Ø¯Ø©</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">ğŸ“…</span>
                            <span>${formatUploadDate(video.uploadDate)}</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">â±ï¸</span>
                            <span>${video.duration}</span>
                        </div>
                    </div>
                </div>

                <div class="video-description">
                    <p>${video.description}</p>
                </div>

                <div class="comments-section">
                    <div class="comments-header">
                        <h3 class="comments-title">Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª</h3>
                        <span class="comments-count" id="commentsCount">0</span>
                    </div>
                    
                    ${commentSection}
                    
                    <div class="comments-list" id="commentsList"></div>
                </div>
            `;

            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            if (window.loadComments) {
                window.loadComments(video.id);
            }
        }

        function closeVideoModal() {
            const modal = document.getElementById('videoModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            document.getElementById('videoPlayer').innerHTML = '';
        }

        function formatUploadDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diff = Math.floor((now - date) / (1000 * 60 * 60 * 24));

            if (diff === 0) return 'Ø§Ù„ÙŠÙˆÙ…';
            if (diff === 1) return 'Ø£Ù…Ø³';
            if (diff < 7) return 'Ù…Ù†Ø° ' + diff + ' ÙŠÙˆÙ…';
            if (diff < 30) return 'Ù…Ù†Ø° ' + Math.floor(diff / 7) + ' Ø£Ø³Ø¨ÙˆØ¹';
            return 'Ù…Ù†Ø° ' + Math.floor(diff / 30) + ' Ø´Ù‡Ø±';
        }

        function openAuthModal(tab) {
            const modal = document.getElementById('authModal');
            modal.style.display = 'flex';
            
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
            document.getElementById(tab + 'Form').classList.add('active');
        }

        function closeAuthModal() {
            document.getElementById('authModal').style.display = 'none';
        }

        function showProfile() {
            document.getElementById('mainContent').classList.add('hidden');
            document.getElementById('profilePage').classList.remove('hidden');
            
            document.getElementById('totalWatched').textContent = '12';
            document.getElementById('totalComments').textContent = '18';
            document.getElementById('joinedDays').textContent = '45';
        }

        function showVideos() {
            document.getElementById('mainContent').classList.remove('hidden');
            document.getElementById('profilePage').classList.add('hidden');
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchTerm = e.target.value;
            displayVideos();
        });

        document.querySelectorAll('.auth-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(tabName + 'Form').classList.add('active');
            });
        });

        document.getElementById('userAvatar')?.addEventListener('click', () => {
            document.getElementById('userWrapper').classList.toggle('active');
        });

        window.addEventListener('click', (e) => {
            const wrapper = document.getElementById('userWrapper');
            if (wrapper && !wrapper.contains(e.target)) {
                wrapper.classList.remove('active');
            }
        });

        window.onclick = (e) => {
            const videoModal = document.getElementById('videoModal');
            const authModal = document.getElementById('authModal');
            
            if (e.target === videoModal) closeVideoModal();
            if (e.target === authModal) closeAuthModal();
        };

        // Initialize the page
        displayVideos();
        document.getElementById('authButtons').classList.remove('hidden');
        
        // Add font loading optimization
        document.fonts.ready.then(() => {
            document.body.classList.add('fonts-loaded');
        });
    </script>
</body>
</html>
